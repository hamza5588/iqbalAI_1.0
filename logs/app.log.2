2025-07-24 03:13:42,137 ERROR: Error generating lesson: Error code: 413 - {'error': {'message': 'Request too large for model `llama3-70b-8192` in organization `org_01jy7h1qgxf038e3a3wsaf1h1n` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Requested 35345, please reduce your message size and try again. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:610]
Traceback (most recent call last):
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py", line 595, in _generate_structured_lesson
    response = self.llm.invoke(self.lesson_prompt.format(text=prompt_text))
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\langchain_core\language_models\chat_models.py", line 378, in invoke
    self.generate_prompt(
    ~~~~~~~~~~~~~~~~~~~~^
        [self._convert_input(input)],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
        **kwargs,
        ^^^^^^^^^
    ).generations[0][0],
    ^
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\langchain_core\language_models\chat_models.py", line 963, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\langchain_core\language_models\chat_models.py", line 782, in generate
    self._generate_with_cache(
    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        m,
        ^^
    ...<2 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\langchain_core\language_models\chat_models.py", line 1028, in _generate_with_cache
    result = self._generate(
        messages, stop=stop, run_manager=run_manager, **kwargs
    )
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\langchain_groq\chat_models.py", line 557, in _generate
    response = self.client.create(messages=message_dicts, **params)
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\groq\resources\chat\completions.py", line 368, in create
    return self._post(
           ~~~~~~~~~~^
        "/openai/v1/chat/completions",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<40 lines>...
        stream_cls=Stream[ChatCompletionChunk],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\groq\_base_client.py", line 1232, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\groq\_base_client.py", line 1034, in request
    raise self._make_status_error_from_response(err.response) from None
groq.APIStatusError: Error code: 413 - {'error': {'message': 'Request too large for model `llama3-70b-8192` in organization `org_01jy7h1qgxf038e3a3wsaf1h1n` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Requested 35345, please reduce your message size and try again. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}}
2025-07-24 03:17:54,861 INFO: Checking survey submission status for user_id: 12 [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1183]
2025-07-24 03:17:54,880 INFO: Survey check result: User 12 has not submitted a survey (count: 0) [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1192]
2025-07-24 03:21:50,596 INFO: Checking survey submission status for user_id: 12 [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1183]
2025-07-24 03:21:50,655 INFO: Survey check result: User 12 has not submitted a survey (count: 0) [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1192]
2025-07-24 03:23:23,247 INFO: Processing text of length: 17686 [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:588]
2025-07-24 03:23:23,250 INFO: About to invoke LLM... [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:589]
2025-07-24 03:23:27,160 INFO: Received LLM response type: <class 'langchain_core.messages.ai.AIMessage'> [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:596]
2025-07-24 03:23:27,162 INFO: Response text (first 200 chars): {
    "title": "Agentic AI: Intelligent Document Processing and Question-Answering",
    "summary": "This lesson covers the Agentic RAG System, a powerful AI platform that combines large language mode [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:601]
2025-07-24 03:23:27,166 INFO: Successfully generated structured lesson [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:607]
2025-07-24 03:31:19,926 INFO: Checking survey submission status for user_id: 12 [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1183]
2025-07-24 03:31:20,000 INFO: Survey check result: User 12 has not submitted a survey (count: 0) [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1192]
2025-07-24 03:33:48,951 INFO: Checking survey submission status for user_id: 12 [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1183]
2025-07-24 03:33:48,955 INFO: Survey check result: User 12 has not submitted a survey (count: 0) [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1192]
2025-07-24 03:34:22,312 INFO: Processing text of length: 17686 [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:588]
2025-07-24 03:34:22,313 INFO: About to invoke LLM... [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:589]
2025-07-24 03:34:25,874 INFO: Received LLM response type: <class 'langchain_core.messages.ai.AIMessage'> [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:596]
2025-07-24 03:34:25,875 INFO: Response text (first 200 chars): {
    "title": "Agentic AI: Intelligent Document Processing and Question Answering",
    "summary": "This lesson covers the Agentic RAG System, a powerful AI platform that combines large language mode [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:601]
2025-07-24 03:34:25,877 INFO: Successfully generated structured lesson [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:607]
2025-07-24 03:37:02,450 INFO: Checking survey submission status for user_id: 12 [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1183]
2025-07-24 03:37:02,455 INFO: Survey check result: User 12 has not submitted a survey (count: 0) [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\models\models.py:1192]
2025-07-24 03:37:36,466 INFO: Processing text of length: 17686 [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:588]
2025-07-24 03:37:36,466 INFO: About to invoke LLM... [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:589]
2025-07-24 03:37:40,769 INFO: Received LLM response type: <class 'langchain_core.messages.ai.AIMessage'> [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:596]
2025-07-24 03:37:40,771 INFO: Response text (first 200 chars): {
    "title": "Agentic AI: Intelligent Document Processing and Question-Answering",
    "summary": "Learn about the Agentic RAG System, a powerful AI platform that combines large language models with [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:601]
2025-07-24 03:37:40,773 INFO: Successfully generated structured lesson [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\services\lesson_service.py:607]
2025-07-24 03:37:51,459 ERROR: Exception on /api/lessons/download_lesson_pdf/26 [GET] [in C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\flask\app.py:875]
Traceback (most recent call last):
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ~^^^^^^^^^^^^^^^^^
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\utils\decorators.py", line 14, in decorated_function
    return f(*args, **kwargs)
  File "C:\Users\DCS\Desktop\New folder (10)\iqbalAI_1.0\app\routes\lesson_routes.py", line 306, in download_lesson_pdf
    from docx2pdf import convert
ModuleNotFoundError: No module named 'docx2pdf'
